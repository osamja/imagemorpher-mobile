(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{131:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r=n(19),a=n.n(r),o=n(9),s=n.n(o),c=n(0),i=n(5),l=n(4),u=n(1),p=n.n(u),d=n(133),m=n(33),f=n(36),h=n(198),j=n(128),b=n(6);function g(e){var t=e.imageRef,n=e.setImageRef,r=Object(c.useState)(!1),o=a()(r,2),s=o[0],l=o[1],u=Object(c.useState)(!1),g=a()(u,2),R=g[0],x=g[1],I=Object(c.useState)(!1),y=a()(I,2),S=y[0],v=y[1],w=function(){var e;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(f.a("ButtonTapped",{name:"PickImage",screen:"main",purpose:"Image upload button"}));case 2:return n.next=4,p.a.awrap(d.a({mediaTypes:m.a.Images,allowsEditing:!0,aspect:[4,3],quality:.1,base64:!0}));case 4:(e=n.sent).cancelled||(null===t||t instanceof Error)&&(e.base64?P(e.base64):P(e.uri));case 6:case"end":return n.stop()}}),null,null,null,Promise)},P=function(e){var t;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:(t=new FormData).append("firstImageRef",e),l(!0),x(!1),v(!1),fetch("https://sammyjaved.com/morph/upload",{method:"POST",headers:{Authorization:"ImageMorpherV1"},body:t}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){return f.a("ButtonTapped",{name:"UploadSuccess",screen:"main",purpose:"Image upload was successful"}),l(!1),x(!0),v(!1),n(e),e.data})).catch((function(e){e.json().then((function(e){f.a("ButtonTapped",{name:"UploadFailure",screen:"main",purpose:"Image upload failed"}),console.log(e),l(!1),x(!1),v(!0);var t=new Error(e);n(t)}))}));case 6:case"end":return r.stop()}}),null,null,null,Promise)};return s?Object(b.jsx)(h.a,{icon:"face-recognition",disabled:!0,loading:!0,children:"Loading.."}):R&&t?Object(b.jsx)(h.a,{icon:"face-recognition",labelStyle:O.btnSize,color:"lightgreen",onPress:w}):S?Object(b.jsxs)(i.a,{children:[Object(b.jsx)(h.a,{icon:"face-recognition",labelStyle:O.btnSize,color:"red",onPress:w}),t&&Object(b.jsx)(j.a,{style:O.errorMessage,children:t.message})]}):Object(b.jsx)(h.a,{icon:"face-recognition",labelStyle:O.btnSize,color:"#e5a823",onPress:w})}var O=l.a.create({btnSize:{fontSize:70},loadingIcon:{marginTop:20},errorMessage:{marginTop:10}});function R(e){var t=e.firstImageRef,n=e.secondImageRef,r=(e.morphResponse,e.setMorphResponse),o=Object(c.useState)(!1),s=a()(o,2),i=s[0],l=s[1],u=Object(c.useState)(!1),d=a()(u,2),m=(d[0],d[1]),j=Object(c.useState)(!1),g=a()(j,2),O=g[0],R=g[1];return i?Object(b.jsx)(h.a,{mode:"outlined",disabled:!0,loading:!0,children:"Loading.."}):O?Object(b.jsx)(h.a,{mode:"outlined",disabled:!0,children:"Morph Failed"}):t||n?t instanceof Error?Object(b.jsx)(h.a,{mode:"outlined",disabled:!0,children:"Re-upload first image"}):n instanceof Error?Object(b.jsx)(h.a,{mode:"outlined",disabled:!0,children:"Re-upload second image"}):!t&&n?Object(b.jsx)(h.a,{mode:"outlined",disabled:!0,children:"Upload the first image"}):t&&!n?Object(b.jsx)(h.a,{mode:"outlined",disabled:!0,children:"Upload the second image"}):t&&n?Object(b.jsx)(h.a,{mode:"outlined",onPress:function(){return function(e,t){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,p.a.awrap(f.a("ButtonTapped",{name:"StartMorph",screen:"main",purpose:"Start the morph"}));case 5:return(n=new FormData).append("firstImageRef",e),n.append("secondImageRef",t),n.append("isSequence","True"),n.append("stepSize","20"),l(!0),m(!1),R(!1),r(null),a.next=16,p.a.awrap(fetch("https://sammyjaved.com/morph",{method:"POST",headers:{Authorization:"ImageMorpherV1"},body:n}).then((function(e){try{if(e.ok)return e.json();throw new Error(e)}catch(t){throw console.log(t.message),l(!1),m(!1),R(!0),r(null),t}})).then((function(e){return l(!1),m(!0),R(!1),r(e),f.a("ButtonTapped",{name:"MorphSequenceSuccess",screen:"main",purpose:"Morph was successful"}),e.data})).catch((function(e){console.error(e),f.a("ButtonTapped",{name:"MorphSequenceFailure",screen:"main",purpose:e.message})})));case 16:a.sent,a.next=22;break;case 19:a.prev=19,a.t0=a.catch(2),console.error(a.t0);case 22:case"end":return a.stop()}}),null,null,[[2,19]],Promise)}(t,n)},children:"Morph"}):void 0:Object(b.jsx)(h.a,{mode:"outlined",disabled:!0,children:"Upload two images to morph"})}function x(e){var t=e.firstImageRef,n=e.setFirstImageRef,r=e.secondImageRef,a=e.setSecondImageRef,o=e.morphResponse,s=e.setMorphResponse;return Object(b.jsxs)(i.a,{style:I.container,children:[Object(b.jsxs)(i.a,{style:I.uploadImgArea,children:[Object(b.jsx)(g,{imageRef:t,setImageRef:n}),Object(b.jsx)(i.a,{style:I.divider}),Object(b.jsx)(g,{imageRef:r,setImageRef:a})]}),Object(b.jsx)(i.a,{style:I.morphBtnArea,children:Object(b.jsx)(i.a,{style:I.morphBtn,children:Object(b.jsx)(R,{style:I.morphBtn,firstImageRef:t,secondImageRef:r,morphResponse:o,setFirstImageRef:n,setSecondImageRef:a,setMorphResponse:s})})})]})}var I=l.a.create({container:{alignItems:"center"},divider:{height:100},morphBtnArea:{margin:100},morphBtn:{width:300}}),y=n(132);function S(e){var t=e.setFirstImageRef,n=e.setSecondImageRef,r=e.setMorphResponse,a=(e.firstImageRef,e.secondImageRef,e.morphResponse);return Object(b.jsxs)(i.a,{style:v.morphBtnArea,children:[Object(b.jsx)(i.a,{style:v.button,children:Object(b.jsx)(h.a,{mode:"outlined",onPress:function(){return f.a("ButtonTapped",{name:"GetMorphSequence",screen:"main",purpose:"Begin the morph"}),void y.a(a.toString())},children:"View Morph"})}),Object(b.jsx)(i.a,{style:v.button,children:Object(b.jsx)(h.a,{mode:"outlined",onPress:function(){return t(null),n(null),void r(null)},children:"Restart"})})]})}var v=l.a.create({morphBtnArea:{alignItems:"center"},button:{marginTop:40,marginBottom:40,width:200}}),w=n(50),P=n(199);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=B(B({},w.a),{},{roundness:2,mode:"adaptive",colors:B(B({},w.a.colors),{},{primary:"#3498db",accent:"#f1c40f"})});function F(){var e=Object(c.useState)(null),t=a()(e,2),n=t[0],r=t[1],o=Object(c.useState)(null),s=a()(o,2),l=s[0],u=s[1],p=Object(c.useState)(null),d=a()(p,2),m=d[0],f=d[1];return Object(b.jsx)(P.a,{theme:T,children:Object(b.jsx)(i.a,{style:k.view,children:m?Object(b.jsx)(S,{firstImageRef:n,secondImageRef:l,morphResponse:m,setFirstImageRef:r,setSecondImageRef:u,setMorphResponse:f}):Object(b.jsx)(x,{firstImageRef:n,secondImageRef:l,morphResponse:m,setFirstImageRef:r,setSecondImageRef:u,setMorphResponse:f})})})}var k=l.a.create({background:{flex:1},view:{marginTop:"30%"}})},136:function(e,t,n){e.exports=n(189)}},[[136,1,2]]]);
//# sourceMappingURL=app.a2f503ff.chunk.js.map